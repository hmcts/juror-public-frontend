{% extends "../../layouts/default.njk" %}

{% block page_title %}
  {{ texts.ON_BEHALF.THIRD_PARTY_PERSONAL_DETAILS.HEADER }} - {{ texts.INTERFACE.GOV }}
{% endblock %}

{% block page_identifier %}3rd Party Personal Details Name{% endblock %}

{% block content %}

<div class="grid-row">
  <div class="column-two-thirds">

    {% include "../../includes/back-link.njk" %}
    {% include "../../includes/errors.njk" %}

    <form action="{{ url('branches.third.party.personal.details.name.post') }}" method="post" {% if not IS_PRODUCTION %}novalidate{% endif %}>

      <div class="form-group {% if errors.items['title'] or errors.items['firstName'] or errors.items['lastName'] %}error{% endif %}">

        <h1 class="heading-xlarge">
          <div class="heading-secondary">
            {{ texts.ON_BEHALF.THIRD_PARTY_PERSONAL_DETAILS.CAPTION }}
          </div>
          {{ texts.ON_BEHALF.THIRD_PARTY_PERSONAL_DETAILS.NAME_HEADER }}
        </h1>

        {# Name #}
        <fieldset class="inline-edit" id="nameGroup">

          <legend>
            <strong class="bold-small">
              {{ texts.ON_BEHALF.THIRD_PARTY_PERSONAL_DETAILS.FORM_NAME_LABEL }}
            </strong>
          </legend>

          <div class="grid-row inline-section primary {% if errors.nameError %}closed{% endif %}">
            <div class="column-one-half" id="name">{{ user.nameRender }}</div>
            <div class="column-one-half">
              <a href="#nameGroup" class="inline-edit-toggle">{{ texts.INTERFACE.FORM_CHANGE_LABEL }}</a>
            </div>
          </div>

          <div class="inline-section secondary {% if errors.nameError %}open{% endif %}">

            <div class="form-group" id="titleGroup">
              <label class="form-label" for="title">{{ texts.ON_BEHALF.THIRD_PARTY_PERSONAL_DETAILS.FORM_TITLE_LABEL }}</label>
              {% if errors.items['title'] %}<span class="error-message" id="titleErrorMessage">{{ errors.items['title'][0].details }}</span>{% endif %}
              <input type="text" class="form-control" name="title" id="title" value="{{ user.title }}" maxlength="10" autocomplete="off" {% if errors.items['title'] %}aria-describedby="titleErrorMessage"{% endif %}>
            </div>

            <div class="form-group" id="firstNameGroup">
              <label class="form-label" for="firstName">{{ texts.ON_BEHALF.THIRD_PARTY_PERSONAL_DETAILS.FORM_FIRST_NAME_LABEL }}</label>
              {% if errors.items['firstName'] %}<span class="error-message" id="firstNameErrorMessage">{{ errors.items['firstName'][0].details }}</span>{% endif %}
              <input type="text" class="form-control" name="firstName" id="firstName" value="{{ user.firstName }}" maxlength="20" autocomplete="off" {% if errors.items['firstName'] %}aria-describedby="firstNameErrorMessage"{% endif %}>
            </div>

            <div class="form-group" id="lastNameGroup">
              <label class="form-label" for="lastName">{{ texts.ON_BEHALF.THIRD_PARTY_PERSONAL_DETAILS.FORM_LAST_NAME_LABEL }}</label>
              {% if errors.items['lastName'] %}<span class="error-message" id="lastNameErrorMessage">{{ errors.items['lastName'][0].details }}</span>{% endif %}
              <input type="text" class="form-control" name="lastName" id="lastName" value="{{ user.lastName }}" maxlength="20" autocomplete="off" {% if errors.items['lastName'] %}aria-describedby="lastNameErrorMessage"{% endif %}>
            </div>

          </div>

        </fieldset>

      </div>

      {# Info about change of name #}
      <br>
      <div class="form-group">
        <details>
          <summary>
            <span class="summary">
              {{ texts.ON_BEHALF.THIRD_PARTY_PERSONAL_DETAILS.HELPER_CHANGE_NAME_TITLE }}
            </span>
          </summary>
          <div class="panel panel-border-narrow" id="details-content-0" aria-hidden="true">
            <p>
              {{ texts.ON_BEHALF.THIRD_PARTY_PERSONAL_DETAILS.HELPER_CHANGE_NAME_PARAGRAPH_1 }}
            </p>
          </div>
        </details>
      </div>

      <br>

      {# Submit form #}
      <input type="hidden" name="_csrf" value="{{ csrftoken }}">
      <input class="button" type="submit" value="{{ texts.INTERFACE.BUTTON_TEXT_CONTINUE }}">

    </form>
  </div>
</div>
{% endblock %}
